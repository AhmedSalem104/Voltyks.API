# Voltyks API - Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„Ø´Ø§Ù…Ù„ Ø§Ù„ÙƒØ§Ù…Ù„

---

# Ø§Ù„ÙÙ‡Ø±Ø³

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#1-Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©-Ø¹Ù„Ù‰-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
2. [Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#2-Ù‡ÙŠÙƒÙ„-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
3. [Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Entities)](#3-Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª-Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
4. [Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±](#4-Ø£Ù†ÙˆØ§Ø¹-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†-ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±)
5. [Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©](#5-Ø±Ø­Ù„Ø©-Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…-Ø§Ù„ÙƒØ§Ù…Ù„Ø©)
6. [Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†](#6-Ø¯ÙˆØ±Ø©-Ø­ÙŠØ§Ø©-Ø¹Ù…Ù„ÙŠØ©-Ø§Ù„Ø´Ø­Ù†)
7. [Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª (Statuses)](#7-Ø¬Ù…ÙŠØ¹-Ø§Ù„Ø­Ø§Ù„Ø§Øª)
8. [Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª](#8-Ù†Ø¸Ø§Ù…-Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)
9. [Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹ (Paymob)](#9-Ù†Ø¸Ø§Ù…-Ø§Ù„Ø¯ÙØ¹)
10. [Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©](#10-Ù†Ø¸Ø§Ù…-Ø§Ù„Ù…Ø­ÙØ¸Ø©)
11. [Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª](#11-Ù†Ø¸Ø§Ù…-Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª)
12. [Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰](#12-Ù†Ø¸Ø§Ù…-Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª-ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰)
13. [Ø§Ù„Ù…ØªØ¬Ø± (Store)](#13-Ø§Ù„Ù…ØªØ¬Ø±)
14. [Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚](#14-Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)
15. [Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Endpoints](#15-Ø¬Ù…ÙŠØ¹-Ø§Ù„Ù€-endpoints)
16. [Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©](#16-Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª-Ø§Ù„ÙƒØ§Ù…Ù„Ø©)

---

# 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

## Ù…Ø§ Ù‡Ùˆ VoltyksØŸ

**Voltyks** Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ù„Ø±Ø¨Ø· Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø¨Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø´ÙˆØ§Ø­Ù† Ø§Ù„Ø®Ø§ØµØ©. ÙŠØªÙŠØ­ Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø·Ù„Ø¨ Ø´Ø­Ù† Ø³ÙŠØ§Ø±Ø§ØªÙ‡Ù… Ù…Ù† Ø´ÙˆØ§Ø­Ù† Ù‚Ø±ÙŠØ¨Ø©ØŒ ÙˆÙŠØªÙŠØ­ Ù„Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø´ÙˆØ§Ø­Ù† ÙƒØ³Ø¨ Ø§Ù„Ù…Ø§Ù„ Ù…Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø´ÙˆØ§Ø­Ù†Ù‡Ù….

## Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©   â”‚â—„â”€â”€â”€â”€ Ø·Ù„Ø¨ Ø´Ø­Ù† â”€â”€â”€â”€â–ºâ”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†   â”‚
â”‚ (Vehicle Owner) â”‚                    â”‚ (Charger Owner) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                      â”‚
        â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚    Voltyks      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚   (Ø§Ù„ÙˆØ³ÙŠØ·)      â”‚
                  â”‚   Ø¹Ù…ÙˆÙ„Ø© 10%     â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 2. Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

## Ø§Ù„Ø·Ø¨Ù‚Ø§Øª (Layers)

```
Voltyks.API (Solution)
â”‚
â”œâ”€â”€ Voltyks.Core                    # Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©
â”‚   â”œâ”€â”€ DTOs/                       # Data Transfer Objects
â”‚   â”œâ”€â”€ Enums/                      # Ø§Ù„ØªØ¹Ø¯Ø§Ø¯Ø§Øª
â”‚   â””â”€â”€ Constants/                  # Ø§Ù„Ø«ÙˆØ§Ø¨Øª
â”‚
â”œâ”€â”€ Voltyks.Persistence             # Ø·Ø¨Ù‚Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”œâ”€â”€ Entities/                   # Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª
â”‚   â”‚   â”œâ”€â”€ Identity/               # AppUser, Address, DeviceToken
â”‚   â”‚   â””â”€â”€ Main/                   # Process, Charger, Vehicle, etc.
â”‚   â”œâ”€â”€ Data/                       # DbContext, Migrations
â”‚   â””â”€â”€ Configurations/             # Entity Configurations
â”‚
â”œâ”€â”€ Voltyks.Application             # Ø·Ø¨Ù‚Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
â”‚   â”œâ”€â”€ Services/                   # ÙƒÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
â”‚   â”œâ”€â”€ Interfaces/                 # ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª
â”‚   â””â”€â”€ Utilities/                  # Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚
â”œâ”€â”€ Voltyks.Infrastructure          # Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
â”‚   â”œâ”€â”€ Firebase/                   # Ø¥Ø´Ø¹Ø§Ø±Ø§Øª FCM
â”‚   â”œâ”€â”€ Paymob/                     # Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¯ÙØ¹
â”‚   â””â”€â”€ SmsEgypt/                   # Ø±Ø³Ø§Ø¦Ù„ SMS
â”‚
â”œâ”€â”€ Voltyks.API                     # ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª
â”‚   â””â”€â”€ Controllers/                # Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Controllers
â”‚
â””â”€â”€ Voltyks.AdminControlDashboard   # Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù†
    â””â”€â”€ Controllers/                # Admin Controllers
```

---

# 3. Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

## 3.1 AppUser (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)

```csharp
public class AppUser : IdentityUser
{
    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
    public string? FullName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime DateOfBirth { get; set; }
    public string? NationalId { get; set; }

    // Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    public bool IsAvailable { get; set; } = true;    // Ù…ØªØ§Ø­ Ù„Ù„Ø¨Ø­Ø«ØŸ
    public bool IsBanned { get; set; } = false;       // Ù…Ø­Ø¸ÙˆØ±ØŸ
    public bool IsDeleted { get; set; } = false;      // Ù…Ø­Ø°ÙˆÙØŸ

    // Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…
    public double Wallet { get; set; } = 0;           // Ø§Ù„Ø±ØµÙŠØ¯
    public double Rating { get; set; } = 0;           // Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
    public int RatingCount { get; set; } = 0;         // Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª

    // Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©
    public string? CurrentActivitiesJson { get; set; } = "[]";  // Ù‚Ø§Ø¦Ù…Ø© Process IDs

    // Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª
    public ICollection<Charger> Chargers { get; set; }
    public ICollection<Vehicle> Vehicles { get; set; }
    public ICollection<DeviceToken> DeviceTokens { get; set; }
    public ICollection<Notification> Notifications { get; set; }
    public ICollection<WalletTransaction> WalletTransactions { get; set; }
}
```

### Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:

| Ø§Ù„Ø­Ù‚Ù„ | Ø§Ù„Ù‚ÙŠÙ…Ø© | Ø§Ù„Ù…Ø¹Ù†Ù‰ |
|-------|--------|--------|
| `IsAvailable` | `true` | ÙŠØ¸Ù‡Ø± ÙÙŠ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« |
| `IsAvailable` | `false` | Ù…Ø®ØªÙÙŠ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« (ÙÙŠ Ø¹Ù…Ù„ÙŠØ©/ØºÙŠØ± Ù…ØªØ§Ø­) |
| `IsBanned` | `true` | Ù…Ø­Ø¸ÙˆØ± Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ |
| `IsDeleted` | `true` | Ø­Ø³Ø§Ø¨ Ù…Ø­Ø°ÙˆÙ (Soft Delete) |

---

## 3.2 Vehicle (Ø§Ù„Ø³ÙŠØ§Ø±Ø©)

```csharp
public class Vehicle : BaseEntity<int>
{
    public string Color { get; set; }
    public string Plate { get; set; }           // Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø© (ÙØ±ÙŠØ¯)
    public int? Year { get; set; }

    public int BrandId { get; set; }            // Ø§Ù„Ù…Ø§Ø±ÙƒØ© (Tesla, BMW, etc.)
    public Brand Brand { get; set; }

    public int ModelId { get; set; }            // Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„
    public Model Model { get; set; }

    public string UserId { get; set; }          // ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
    public AppUser User { get; set; }

    public bool IsDeleted { get; set; }
    public DateTime CreationDate { get; set; }
}
```

---

## 3.3 Charger (Ø§Ù„Ø´Ø§Ø­Ù†)

```csharp
public class Charger : BaseEntity<int>
{
    public string UserId { get; set; }          // ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
    public AppUser User { get; set; }

    public int ProtocolId { get; set; }         // Ù†ÙˆØ¹ Ø§Ù„ØªÙˆØµÙŠÙ„ (Type2, CCS, etc.)
    public Protocol Protocol { get; set; }

    public int CapacityId { get; set; }         // Ø§Ù„Ø³Ø¹Ø© Ø¨Ø§Ù„ÙƒÙŠÙ„ÙˆÙˆØ§Øª
    public Capacity Capacity { get; set; }

    public int PriceOptionId { get; set; }      // Ø³Ø¹Ø± Ø§Ù„ÙƒÙŠÙ„ÙˆÙˆØ§Øª
    public PriceOption PriceOption { get; set; }

    public int AddressId { get; set; }          // Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    public ChargerAddress ChargerAddress { get; set; }

    public bool IsActive { get; set; }          // Ù†Ø´Ø·/Ù…ØªØ§Ø­ Ù„Ù„Ø¨Ø­Ø«ØŸ
    public bool? Adaptor { get; set; }          // ÙŠÙˆØ¬Ø¯ Ù…Ø­ÙˆÙ„ØŸ
    public bool IsDeleted { get; set; }

    public double AverageRating { get; set; }
    public int RatingCount { get; set; }
    public DateTime DateAdded { get; set; }
}
```

### Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø´Ø§Ø­Ù†:

| IsActive | ChargingMode | Ø§Ù„Ù†ØªÙŠØ¬Ø© |
|----------|--------------|---------|
| `false` | `false` | Ù„Ø§ ÙŠØ¸Ù‡Ø± + Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„Ù‡ |
| `false` | `true` | Ù„Ø§ ÙŠØ¸Ù‡Ø± + ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„Ù‡ |
| `true` | Ø£ÙŠ Ù‚ÙŠÙ…Ø© | ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¨Ø­Ø« |

---

## 3.4 ChargingRequest (Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù†)

```csharp
public class ChargingRequest : BaseEntity<int>
{
    // Ø§Ù„Ø£Ø·Ø±Ø§Ù
    public string UserId { get; set; }              // ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Ø§Ù„Ø·Ø§Ù„Ø¨)
    public AppUser CarOwner { get; set; }

    public int ChargerId { get; set; }              // Ø§Ù„Ø´Ø§Ø­Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
    public Charger Charger { get; set; }

    public string RecipientUserId { get; set; }     // ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†

    // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
    public double KwNeeded { get; set; }            // Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
    public int CurrentBatteryPercentage { get; set; }
    public double Latitude { get; set; }
    public double Longitude { get; set; }

    // Ø§Ù„ØªØ³Ø¹ÙŠØ±
    public decimal BaseAmount { get; set; }         // Ù…Ø¨Ù„Øº ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
    public decimal VoltyksFees { get; set; }        // Ø¹Ù…ÙˆÙ„Ø© Voltyks
    public decimal EstimatedPrice { get; set; }     // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ

    // Ø§Ù„Ø­Ø§Ù„Ø©
    public string Status { get; set; }              // pending/accepted/rejected/confirmed/aborted/expired

    // Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª
    public DateTime RequestedAt { get; set; }       // ÙˆÙ‚Øª Ø§Ù„Ø·Ù„Ø¨
    public DateTime? RespondedAt { get; set; }      // ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯
    public DateTime? ConfirmedAt { get; set; }      // ÙˆÙ‚Øª Ø§Ù„ØªØ£ÙƒÙŠØ¯
}
```

---

## 3.5 Process (Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†)

```csharp
public class Process : BaseEntity<int>
{
    public int ChargerRequestId { get; set; }       // Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù† Ø§Ù„Ù…Ø±ØªØ¨Ø·
    public ChargingRequest ChargerRequest { get; set; }

    // Ø§Ù„Ø£Ø·Ø±Ø§Ù
    public string VehicleOwnerId { get; set; }      // ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
    public string ChargerOwnerId { get; set; }      // ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†

    // Ø§Ù„Ø­Ø§Ù„Ø©
    public ProcessStatus Status { get; set; }       // PendingCompleted/Completed/Aborted
    public string? SubStatus { get; set; }          // Ø­Ø§Ù„Ø© ÙØ±Ø¹ÙŠØ© ØªÙØµÙŠÙ„ÙŠØ©

    // Ø§Ù„Ù…Ø§Ù„ÙŠØ©
    public decimal? EstimatedPrice { get; set; }
    public decimal? AmountPaid { get; set; }
    public decimal? AmountCharged { get; set; }

    // Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
    public double? VehicleOwnerRating { get; set; } // ØªÙ‚ÙŠÙŠÙ… ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù„Ù„Ø¹Ù…Ù„ÙŠØ©
    public double? ChargerOwnerRating { get; set; } // ØªÙ‚ÙŠÙŠÙ… ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† Ù„Ù„Ø¹Ù…Ù„ÙŠØ©

    // Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª
    public DateTime DateCreated { get; set; }
    public DateTime? DateCompleted { get; set; }
}
```

---

# 4. Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØ§Ù„Ø£Ø¯ÙˆØ§Ø±

## 4.1 ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© (Vehicle Owner)

**Ø§Ù„ÙˆØ¸ÙŠÙØ©:** ÙŠØ¨Ø­Ø« Ø¹Ù† Ø´Ø§Ø­Ù† Ù‚Ø±ÙŠØ¨ ÙˆÙŠØ·Ù„Ø¨ Ø´Ø­Ù† Ø³ÙŠØ§Ø±ØªÙ‡.

**Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª:**
- âœ… Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø³ÙŠØ§Ø±Ø§Øª
- âœ… Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´ÙˆØ§Ø­Ù† Ù‚Ø±ÙŠØ¨Ø©
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù†
- âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø¨ÙˆÙ„
- âœ… Ø¥Ù„ØºØ§Ø¡/Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
- âœ… ØªÙ‚ÙŠÙŠÙ… ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù„Ø§Øº
- âœ… Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©/Ø§Ù„Ù…Ø­ÙØ¸Ø©

---

## 4.2 ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† (Charger Owner)

**Ø§Ù„ÙˆØ¸ÙŠÙØ©:** ÙŠÙ…Ù„Ùƒ Ø´Ø§Ø­Ù† ÙˆÙŠØ³ØªÙ‚Ø¨Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù† Ù…Ù† Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª.

**Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª:**
- âœ… Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø´ÙˆØ§Ø­Ù†
- âœ… ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø´Ø§Ø­Ù†
- âœ… Ù‚Ø¨ÙˆÙ„/Ø±ÙØ¶ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø­Ù†
- âœ… Ø¨Ø¯Ø¡/Ø¥Ù†Ù‡Ø§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†
- âœ… ØªÙ‚ÙŠÙŠÙ… ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
- âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù„Ø§Øº
- âœ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©

---

## 4.3 Ø§Ù„Ù…Ø¯ÙŠØ± (Admin)

**Ø§Ù„ÙˆØ¸ÙŠÙØ©:** Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.

**Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª:**
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ø­Ø¸Ø±/Ø¥Ù„ØºØ§Ø¡ Ø­Ø¸Ø±)
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙˆØ§Ø­Ù† ÙˆØ§Ù„Ø³ÙŠØ§Ø±Ø§Øª
- âœ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø± ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
- âœ… ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø­Ù†
- âœ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª ÙˆØ§Ù„Ø±Ø³ÙˆÙ…

---

## 4.4 Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙˆØ§Ø­Ø¯ = Ø¯ÙˆØ±ÙŠÙ†

Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙˆØ§Ø­Ø¯ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† **ØµØ§Ø­Ø¨ Ø³ÙŠØ§Ø±Ø© ÙˆØµØ§Ø­Ø¨ Ø´Ø§Ø­Ù† ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AppUser                        â”‚
â”‚                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚  Vehicles   â”‚     â”‚    Chargers     â”‚      â”‚
â”‚   â”‚  (Ø³ÙŠØ§Ø±Ø§ØªÙŠ) â”‚     â”‚   (Ø´ÙˆØ§Ø­Ù†ÙŠ)     â”‚      â”‚
â”‚   â”‚  [0..n]    â”‚     â”‚     [0..n]      â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                 â”‚
â”‚   ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ†:                                â”‚
â”‚   â€¢ ØµØ§Ø­Ø¨ Ø³ÙŠØ§Ø±Ø© ÙÙ‚Ø·                              â”‚
â”‚   â€¢ ØµØ§Ø­Ø¨ Ø´Ø§Ø­Ù† ÙÙ‚Ø·                               â”‚
â”‚   â€¢ Ø§Ù„Ø§Ø«Ù†ÙŠÙ† Ù…Ø¹Ø§Ù‹                                â”‚
â”‚   â€¢ Ù„Ø§ Ø´ÙŠØ¡ (Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 5. Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©

## 5.1 Ø§Ù„ØªØ³Ø¬ÙŠÙ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    1. Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Registration)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚                                       â”‚
â”‚       â†“                                                      â”‚
â”‚  POST /api/auth/register                                     â”‚
â”‚  {                                                           â”‚
â”‚    "firstName": "Ø£Ø­Ù…Ø¯",                                      â”‚
â”‚    "lastName": "Ù…Ø­Ù…Ø¯",                                       â”‚
â”‚    "email": "ahmed@example.com",                             â”‚
â”‚    "phoneNumber": "01012345678",                             â”‚
â”‚    "password": "Password123!",                               â”‚
â”‚    "city": "Cairo"                                           â”‚
â”‚  }                                                           â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù…:                                                     â”‚
â”‚  â€¢ ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„/Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„                        â”‚
â”‚  â€¢ ÙŠÙ†Ø´Ø¦ AppUser Ø¬Ø¯ÙŠØ¯                                         â”‚
â”‚  â€¢ IsAvailable = true (Ø§ÙØªØ±Ø§Ø¶ÙŠ)                              â”‚
â”‚  â€¢ CurrentActivities = [] (ÙØ§Ø¶ÙŠ)                             â”‚
â”‚  â€¢ Wallet = 0                                                â”‚
â”‚       â†“                                                      â”‚
â”‚  ÙŠØ±Ø¬Ø¹: JWT Token + Refresh Token                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.2 ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     2. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Login)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  POST /api/auth/Login                                        â”‚
â”‚  {                                                           â”‚
â”‚    "phoneNumberOrEmail": "01012345678",                      â”‚
â”‚    "password": "Password123!"                                â”‚
â”‚  }                                                           â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªØ­Ù‚Ù‚:                                               â”‚
â”‚  â€¢ âœ“ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯                                          â”‚
â”‚  â€¢ âœ“ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØµØ­ÙŠØ­Ø©                                         â”‚
â”‚  â€¢ âœ“ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø­Ø¸ÙˆØ± (IsBanned = false)                   â”‚
â”‚       â†“                                                      â”‚
â”‚  ÙŠØ±Ø¬Ø¹: JWT Token + Refresh Token + User Details              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.3 Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3. Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø© (Add Vehicle)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Ø£ÙˆÙ„Ø§Ù‹: Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª                                         â”‚
â”‚  GET /api/brand/GetAllBrands                                 â”‚
â”‚  â†’ [Tesla, BMW, Mercedes, BYD, ...]                          â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø«Ø§Ù†ÙŠØ§Ù‹: Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø§Ø±ÙƒØ©                           â”‚
â”‚  GET /api/model/GetModelsByBrandId?brandId=1                 â”‚
â”‚  â†’ [Model S, Model 3, Model X, ...]                          â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø«Ø§Ù„Ø«Ø§Ù‹: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙŠØ§Ø±Ø©                                       â”‚
â”‚  POST /api/vehicles/CreateVehicle                            â”‚
â”‚  {                                                           â”‚
â”‚    "brandId": 1,                                             â”‚
â”‚    "modelId": 5,                                             â”‚
â”‚    "year": 2023,                                             â”‚
â”‚    "color": "Ø£Ø¨ÙŠØ¶",                                          â”‚
â”‚    "plate": "Ø£ Ø¨ Ø¬ 1234"                                     â”‚
â”‚  }                                                           â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù…Ø¶Ø§ÙØ© âœ“                                    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.4 Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø­Ù†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    4. Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø­Ù† (Add Charger)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Ø£ÙˆÙ„Ø§Ù‹: Ø¬Ù„Ø¨ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª ÙˆØ§Ù„Ø³Ø¹Ø§Øª                             â”‚
â”‚  GET /api/charger/GetProtocol â†’ [Type2, CCS, CHAdeMO, ...]   â”‚
â”‚  GET /api/charger/GetCapacity â†’ [7kW, 11kW, 22kW, ...]       â”‚
â”‚  GET /api/charger/GetPrices â†’ [5 EGP/kW, 7 EGP/kW, ...]      â”‚
â”‚       â†“                                                      â”‚
â”‚  POST /api/charger/AddCharger                                â”‚
â”‚  {                                                           â”‚
â”‚    "protocolId": 1,                                          â”‚
â”‚    "capacityId": 2,                                          â”‚
â”‚    "priceOptionId": 1,                                       â”‚
â”‚    "adaptor": true,                                          â”‚
â”‚    "address": {                                              â”‚
â”‚      "area": "Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±",                                    â”‚
â”‚      "street": "Ø´Ø§Ø±Ø¹ Ù…ØµØ·ÙÙ‰ Ø§Ù„Ù†Ø­Ø§Ø³",                          â”‚
â”‚      "buildingNumber": "15",                                 â”‚
â”‚      "latitude": 30.0444,                                    â”‚
â”‚      "longitude": 31.2357                                    â”‚
â”‚    }                                                         â”‚
â”‚  }                                                           â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªØ­Ù‚Ù‚ Ù…Ù† ChargingMode:                               â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ if (ChargingModeEnabled = false)            â”‚             â”‚
â”‚  â”‚     charger.IsActive = false  // Ù…Ø¹Ø·Ù‘Ù„      â”‚             â”‚
â”‚  â”‚     Ø±Ø³Ø§Ù„Ø©: "Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„Ù‡ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"         â”‚             â”‚
â”‚  â”‚                                             â”‚             â”‚
â”‚  â”‚ if (ChargingModeEnabled = true)             â”‚             â”‚
â”‚  â”‚     charger.IsActive = true   // Ù†Ø´Ø·        â”‚             â”‚
â”‚  â”‚     Ø±Ø³Ø§Ù„Ø©: "Ø§Ù„Ø´Ø§Ø­Ù† Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"          â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5.5 ØªØ³Ø¬ÙŠÙ„ Device Token

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              5. ØªØ³Ø¬ÙŠÙ„ Device Token (Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:                                            â”‚
â”‚                                                              â”‚
â”‚  POST /api/chargingRequest/registerDeviceToken               â”‚
â”‚  {                                                           â”‚
â”‚    "token": "firebase_device_token_here",                    â”‚
â”‚    "roleContext": "vehicle_owner"  // Ø£Ùˆ "charger_owner"     â”‚
â”‚  }                                                           â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù…:                                                     â”‚
â”‚  â€¢ ÙŠØ­ÙØ¸ Ø§Ù„Ù€ token ÙÙŠ Ø¬Ø¯ÙˆÙ„ DeviceTokens                       â”‚
â”‚  â€¢ ÙŠØ±Ø¨Ø·Ù‡ Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ                                    â”‚
â”‚  â€¢ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ù‡ Ø£ÙƒØ«Ø± Ù…Ù† token (Ø£ÙƒØ«Ø± Ù…Ù† Ø¬Ù‡Ø§Ø²)     â”‚
â”‚       â†“                                                      â”‚
â”‚  Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª FCM âœ“                      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 6. Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†

## 6.1 Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„ÙƒØ§Ù…Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø­Ù†                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                â”‚
â”‚   ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©                                    ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                 â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•                                    â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
â”‚                                                                                â”‚
â”‚   [1] Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´Ø§Ø­Ù†                                                           â”‚
â”‚        â†“                                                                       â”‚
â”‚   [2] Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  [3] Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø´Ø¹Ø§Ø±             â”‚
â”‚       Status: "pending"                              ğŸ“± Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯           â”‚
â”‚                                                          â†“                     â”‚
â”‚                                                      [4] Ø§Ù„Ù‚Ø±Ø§Ø±                â”‚
â”‚                                                      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”               â”‚
â”‚                                                      â†“         â†“               â”‚
â”‚   [5a] Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø§Ù„Ù‚Ø¨ÙˆÙ„ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Ù‚Ø¨ÙˆÙ„       Ø±ÙØ¶                â”‚
â”‚        Status: "accepted"                     "accepted"  "rejected"           â”‚
â”‚        Timer: 10 Ø¯Ù‚Ø§Ø¦Ù‚                              â”‚         â”‚               â”‚
â”‚        â†“                                            â”‚         â†“               â”‚
â”‚   [6] Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙˆØ§Ù„Ø°Ù‡Ø§Ø¨                               â”‚    [5b] Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø§Ù„Ø±ÙØ¶     â”‚
â”‚       Status: "confirmed"                           â”‚         Ø§Ù†ØªÙ‡Ù‰ âŒ         â”‚
â”‚       Timer: 15 Ø¯Ù‚ÙŠÙ‚Ø©                               â”‚                         â”‚
â”‚        â†“                                            â”‚                         â”‚
â”‚   [7] Ø§Ù„ÙˆØµÙˆÙ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  [8] Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ø­Ù†               â”‚
â”‚                                                      Status: "Started"         â”‚
â”‚                                                      Process.Status:           â”‚
â”‚                                                      PendingCompleted          â”‚
â”‚                                                          â†“                     â”‚
â”‚                                                      [9] Ø§Ù„Ø´Ø­Ù† Ø¬Ø§Ø±ÙŠ...         â”‚
â”‚                                                      ØªØ­Ø¯ÙŠØ«Ø§Øª SignalR           â”‚
â”‚                                                          â†“                     â”‚
â”‚   [10] Ø¥Ø´Ø¹Ø§Ø± Ø¨Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  [11] Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´Ø­Ù†             â”‚
â”‚        Status: "PendingCompleted"                   owner-decision:            â”‚
â”‚        â†“                                            "ended"                    â”‚
â”‚   [12] Ø§Ù„Ø¯ÙØ¹                                             â†“                     â”‚
â”‚        Paymob/Wallet                              [13] Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ø¨Ù„Øº          â”‚
â”‚        â†“                                            ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©                â”‚
â”‚   [14] Ø§Ù„ØªÙ‚ÙŠÙŠÙ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  [15] Ø§Ù„ØªÙ‚ÙŠÙŠÙ…                 â”‚
â”‚        â†“                                                â†“                      â”‚
â”‚   [16] Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø© â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  Process.Status: Completed    â”‚
â”‚        CurrentActivities = []                        CurrentActivities = []    â”‚
â”‚        IsAvailable = true                            IsAvailable = true        â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6.2 Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø¨Ø§Ù„ØªÙØµÙŠÙ„

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´Ø§Ø­Ù†

```
POST /api/charger/GetNearChargers
{
  "latitude": 30.0444,
  "longitude": 31.2357,
  "radiusKm": 5,
  "protocolId": 1,        // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  "minCapacityKw": 7      // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
}
```

**Ø§Ù„ÙÙ„ØªØ±Ø©:**
```csharp
.Where(c =>
    c.IsActive == true &&           // Ø§Ù„Ø´Ø§Ø­Ù† Ù†Ø´Ø·
    c.User.IsAvailable == true &&   // ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† Ù…ØªØ§Ø­
    c.IsDeleted == false            // ØºÙŠØ± Ù…Ø­Ø°ÙˆÙ
)
```

---

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù†

```
POST /api/chargingRequest/sendChargingRequest
{
  "chargerId": 5,
  "kwNeeded": 30,
  "currentBatteryPercentage": 20,
  "latitude": 30.0444,
  "longitude": 31.2357
}
```

**Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ‚ÙˆÙ… Ø¨Ù€:**
1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¹Ù…Ù„ÙŠØ© Ù†Ø´Ø·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… (Smart Validation)
2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ
4. Ø¥Ù†Ø´Ø§Ø¡ ChargingRequest Ø¨Ø­Ø§Ù„Ø© "pending"
5. Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± FCM Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†

**Smart Validation:**
```csharp
if (vehicleOwner.CurrentActivities.Count > 0)
{
    // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù€ IDs ÙØ¹Ù„Ø§Ù‹ Ù†Ø´Ø·Ø© ÙÙŠ Ø§Ù„Ù€ DB
    var hasActuallyActiveProcess = await _db.Set<Process>()
        .AnyAsync(p => activeProcessIds.Contains(p.Id)
            && p.Status != ProcessStatus.Completed
            && p.Status != ProcessStatus.Aborted);

    if (hasActuallyActiveProcess)
        return Error("You already have an active charging process");

    // Auto-cleanup Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    vehicleOwner.CurrentActivities = new List<int>();
    vehicleOwner.IsAvailable = true;
}
```

---

### Ø§Ù„Ø®Ø·ÙˆØ© 3-4: ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† ÙŠÙ‚Ø±Ø±

**Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
```
PUT /api/chargingRequest/AcceptRequest
{ "requestId": 123 }
```

**Ø§Ù„Ø±ÙØ¶:**
```
PUT /api/chargingRequest/RejectRequest
{ "requestId": 123, "reason": "Ù…Ø´ØºÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹" }
```

**Ø¹Ù†Ø¯ Ø§Ù„Ù‚Ø¨ÙˆÙ„:**
- ChargingRequest.Status â†’ "accepted"
- ChargingRequest.RespondedAt â†’ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
- Timer ÙŠØ¨Ø¯Ø£: 10 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù„Ù„ØªØ£ÙƒÙŠØ¯

---

### Ø§Ù„Ø®Ø·ÙˆØ© 5-6: ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© ÙŠØ¤ÙƒØ¯

```
POST /api/processes/confirm-by-vehicle-owner
{ "requestId": 123 }
```

**Ù…Ø§ ÙŠØ­Ø¯Ø«:**
1. ChargingRequest.Status â†’ "confirmed"
2. ChargingRequest.ConfirmedAt â†’ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
3. Ø¥Ù†Ø´Ø§Ø¡ Process Ø¬Ø¯ÙŠØ¯ (Status: PendingCompleted)
4. Ø¥Ø¶Ø§ÙØ© Process.Id Ù„Ù€ CurrentActivities Ù„Ù„Ø·Ø±ÙÙŠÙ†
5. IsAvailable = false Ù„Ù„Ø·Ø±ÙÙŠÙ†
6. Timer Ø¬Ø¯ÙŠØ¯: 15 Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„ÙˆØµÙˆÙ„

```csharp
// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù€ CurrentActivities
var list = vo.CurrentActivities.ToList();
if (!list.Contains(process.Id))
{
    list.Add(process.Id);
    vo.CurrentActivities = list;
}
vo.IsAvailable = false; // Ù…Ø®ØªÙÙŠ Ù…Ù† Ø§Ù„Ø¨Ø­Ø«

// Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
```

---

### Ø§Ù„Ø®Ø·ÙˆØ© 7-9: Ø§Ù„Ø´Ø­Ù†

**Ø¨Ø¯Ø¡ Ø§Ù„Ø´Ø­Ù†:**
```
POST /api/processes/owner-decision
{
  "processId": 456,
  "decision": "started"
}
```

**ØªØ­Ø¯ÙŠØ« Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø´Ø­Ù† (SignalR):**
```
POST /api/processes/update-Process
{
  "processId": 456,
  "amountCharged": 15.5,  // Ø§Ù„ÙƒÙŠÙ„ÙˆÙˆØ§Øª Ø§Ù„Ù…Ø´Ø­ÙˆÙ†Ø©
  "estimatedPrice": 77.5   // Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ
}
```

---

### Ø§Ù„Ø®Ø·ÙˆØ© 10-11: Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´Ø­Ù†

**ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† ÙŠÙ†Ù‡ÙŠ:**
```
POST /api/processes/owner-decision
{
  "processId": 456,
  "decision": "ended"
}
```

**Ù…Ø§ ÙŠØ­Ø¯Ø«:**
- Process.Status â†’ "PendingCompleted" (ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…)
- Ø¥Ø´Ø¹Ø§Ø± Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©

---

### Ø§Ù„Ø®Ø·ÙˆØ© 12-13: Ø§Ù„Ø¯ÙØ¹

Ø§Ù„Ø³Ø¹Ø± ÙŠÙØ­Ø³Ø¨ ÙƒØ§Ù„ØªØ§Ù„ÙŠ:
```
BaseAmount = AmountCharged Ã— PricePerKw     // Ù„ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†
VoltyksFees = max(MinimumFee, BaseAmount Ã— Percentage)  // Ø¹Ù…ÙˆÙ„Ø© Voltyks
TotalPrice = BaseAmount + VoltyksFees       // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
```

**Ù…Ø«Ø§Ù„:**
```
AmountCharged = 30 kW
PricePerKw = 5 EGP
BaseAmount = 30 Ã— 5 = 150 EGP

MinimumFee = 10 EGP
Percentage = 10%
VoltyksFees = max(10, 150 Ã— 0.10) = 15 EGP

TotalPrice = 150 + 15 = 165 EGP
```

---

### Ø§Ù„Ø®Ø·ÙˆØ© 14-15: Ø§Ù„ØªÙ‚ÙŠÙŠÙ…

**ÙƒÙ„Ø§ Ø§Ù„Ø·Ø±ÙÙŠÙ† ÙŠÙ‚ÙŠÙ‘Ù…:**
```
POST /api/processes/submit-rating
{
  "processId": 456,
  "stars": 5  // 1-5
}
```

**Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚ÙŠÙ‘Ù… Ø§Ù„Ø·Ø±ÙÙŠÙ†:**
```csharp
if (process.VehicleOwnerRating.HasValue && process.ChargerOwnerRating.HasValue)
{
    process.Status = ProcessStatus.Completed;

    // Cleanup
    foreach (var uid in new[] { process.VehicleOwnerId, process.ChargerOwnerId })
    {
        var u = await _ctx.Set<AppUser>().FindAsync(uid);
        var list = u.CurrentActivities.ToList();
        list.Remove(process.Id);
        u.CurrentActivities = list;

        if (u.CurrentActivities.Count == 0)
            u.IsAvailable = true;  // ÙŠØ±Ø¬Ø¹ Ù…ØªØ§Ø­ Ù„Ù„Ø¨Ø­Ø«
    }
}
```

---

# 7. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª

## 7.1 ChargingRequest Status

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ChargingRequest.Status Flow                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚ pending â”‚  â† Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©          â”‚
â”‚                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                               â”‚
â”‚                         â”‚                                    â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚          â†“              â†“              â†“           â†“        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ accepted â”‚   â”‚ rejected â”‚   â”‚ expired â”‚  â”‚ aborted â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚              âŒ             âŒ            âŒ        â”‚
â”‚         â†“                                                    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚    â”‚ confirmed â”‚                                            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚          â”‚                                                   â”‚
â”‚          â†“                                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚    â”‚ Started  â”‚  â† Process ÙŠÙÙ†Ø´Ø£ Ù‡Ù†Ø§                        â”‚
â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚         â”‚                                                    â”‚
â”‚         â†“                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚  â”‚PendingCompletedâ”‚  â† ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚          â”‚                                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                             â”‚
â”‚     â†“         â†“                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚ â”‚Completedâ”‚ â”‚ Aborted â”‚                                     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚      âœ…          âŒ                                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7.2 Process Status

| Ø§Ù„Ù‚ÙŠÙ…Ø© | Ø§Ù„Ø§Ø³Ù… | Ø§Ù„Ù…Ø¹Ù†Ù‰ |
|--------|-------|--------|
| `0` | PendingCompleted | Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø§Ø±ÙŠØ©/ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡ |
| `1` | Completed | Ù…ÙƒØªÙ…Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ |
| `2` | Aborted | Ù…Ù„ØºØ§Ø©/Ù…Ù†ØªÙ‡ÙŠØ© Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ |

---

## 7.3 User Availability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    IsAvailable Flow                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  [ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯]                                                  â”‚
â”‚       â†“                                                        â”‚
â”‚  IsAvailable = true (Ø§ÙØªØ±Ø§Ø¶ÙŠ)                                  â”‚
â”‚  CurrentActivities = []                                        â”‚
â”‚       â†“                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¨Ø­Ø« âœ“                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚ [ØªØ£ÙƒÙŠØ¯ Ø¹Ù…Ù„ÙŠØ© Ø´Ø­Ù†]                                      â”‚
â”‚       â†“                                                        â”‚
â”‚  IsAvailable = false                                           â”‚
â”‚  CurrentActivities = [processId]                               â”‚
â”‚       â†“                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Ù…Ø®ØªÙÙŠ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« âœ—                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                                                        â”‚
â”‚       â”‚ [Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ØªÙ†ØªÙ‡ÙŠ + Ø§Ù„ØªÙ‚ÙŠÙŠÙ…]                              â”‚
â”‚       â†“                                                        â”‚
â”‚  CurrentActivities.Remove(processId)                           â”‚
â”‚  if (CurrentActivities.Count == 0)                             â”‚
â”‚      IsAvailable = true                                        â”‚
â”‚       â†“                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¨Ø­Ø« âœ“                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 8. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

## 8.1 Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

```csharp
public static class NotificationTypes
{
    // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø·Ù„Ø¨ Ø§Ù„Ø´Ø­Ù†
    public const string VehicleOwner_RequestCharger = "VehicleOwner_RequestCharger";
    public const string ChargerOwner_AcceptRequest = "ChargerOwner_AcceptRequest";
    public const string ChargerOwner_RejectRequest = "ChargerOwner_RejectRequest";

    // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    public const string VehicleOwner_CreateProcess = "VehicleOwner_CreateProcess";
    public const string VehicleOwner_UpdateProcess = "VehicleOwner_UpdateProcess";
    public const string VehicleOwner_CompleteProcessSuccessfully = "VehicleOwner_CompleteProcessSuccessfully";
    public const string VehicleOwner_ProcessAbortedAfterPaymentSuccessfully = "VehicleOwner_ProcessAbortedAfterPaymentSuccessfully";

    // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª
    public const string Report_ChargerOwnerToVehicleOwner = "Report_ChargerOwnerToVehicleOwner";
    public const string Report_VehicleOwnerToChargerOwner = "Report_VehicleOwnerToChargerOwner";
    public const string Process_Terminated = "Process_Terminated";

    // Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ù…Ù†
    public const string Admin_Report_Created = "Admin_Report_Created";
    public const string Admin_Complaint_Created = "Admin_Complaint_Created";
    public const string Admin_Reservation_Created = "Admin_Reservation_Created";
}
```

---

## 8.2 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±

```json
{
  "message": {
    "token": "device_token",
    "notification": {
      "title": "Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯",
      "body": "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ ÙŠØ·Ù„Ø¨ Ø´Ø­Ù† Ø³ÙŠØ§Ø±ØªÙ‡"
    },
    "data": {
      "requestId": "123",
      "NotificationType": "VehicleOwner_RequestCharger",
      "processId": "456",
      "estimatedPrice": "165.00"
    },
    "android": {
      "priority": "high",
      "notification": {
        "sound": "default",
        "channel_id": "voltyks_notifications_v2"
      }
    }
  }
}
```

---

## 8.3 ØªØ¯ÙÙ‚ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Notification Flow                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [1] Ø­Ø¯Ø« ÙŠØ­ØµÙ„ (Ø·Ù„Ø¨ Ø´Ø­Ù†ØŒ Ù‚Ø¨ÙˆÙ„ØŒ Ø¥Ù„Ø®)                              â”‚
â”‚       â†“                                                         â”‚
â”‚  [2] Service ÙŠØ³ØªØ¯Ø¹ÙŠ FirebaseService.SendNotificationAsync()     â”‚
â”‚       â†“                                                         â”‚
â”‚  [3] Ø¬Ù„Ø¨ DeviceTokens Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù                         â”‚
â”‚       â†“                                                         â”‚
â”‚  [4] Ø¥Ø±Ø³Ø§Ù„ FCM Ù„ÙƒÙ„ token                                        â”‚
â”‚       â†“                                                         â”‚
â”‚  [5] Ø­ÙØ¸ Notification ÙÙŠ Ø§Ù„Ù€ Database                           â”‚
â”‚       â†“                                                         â”‚
â”‚  [6] Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ³ØªÙ‚Ø¨Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±                                    â”‚
â”‚      â”œâ”€â”€ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…ÙØªÙˆØ­ â†’ SignalR real-time                      â”‚
â”‚      â””â”€â”€ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…ØºÙ„Ù‚ â†’ FCM Push Notification                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 9. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹ (Paymob)

## 9.1 Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©

1. **Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ© (Card)** - Visa, Mastercard
2. **Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© (Wallet)** - Vodafone Cash, Fawry, etc.
3. **Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© (Saved Cards)** - Ù„Ù„Ø¯ÙØ¹ Ø§Ù„Ø³Ø±ÙŠØ¹

---

## 9.2 ØªØ¯ÙÙ‚ Ø§Ù„Ø¯ÙØ¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Payment Flow                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [1] Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¨Ù„Øº                                                â”‚
â”‚      POST /api/chargingRequest/voltyksFeesForRequest            â”‚
â”‚      â†’ { baseAmount: 150, voltyksFees: 15, total: 165 }         â”‚
â”‚       â†“                                                         â”‚
â”‚  [2] Ø¥Ù†Ø´Ø§Ø¡ Payment Intention                                    â”‚
â”‚      POST /api/payment/create-intention                         â”‚
â”‚      â†’ PaymentOrder created                                     â”‚
â”‚       â†“                                                         â”‚
â”‚  [3] Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¯ÙØ¹                                              â”‚
â”‚      â”œâ”€â”€ Card â†’ Paymob iframe                                   â”‚
â”‚      â”œâ”€â”€ Wallet â†’ Redirect to wallet app                        â”‚
â”‚      â””â”€â”€ Saved Card â†’ Direct charge                             â”‚
â”‚       â†“                                                         â”‚
â”‚  [4] Paymob Webhook                                             â”‚
â”‚      POST /api/payment/webhook                                  â”‚
â”‚      â”œâ”€â”€ HMAC verification                                      â”‚
â”‚      â”œâ”€â”€ PaymentTransaction updated                             â”‚
â”‚      â””â”€â”€ WalletTransaction created                              â”‚
â”‚       â†“                                                         â”‚
â”‚  [5] ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ù…Ø­ÙØ¸Ø©                                              â”‚
â”‚      POST /api/chargingRequest/transfer-fees                    â”‚
â”‚      â†’ ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†: Wallet += BaseAmount                        â”‚
â”‚      â†’ Voltyks: VoltyksFees                                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9.3 Entities Ø§Ù„Ø¯ÙØ¹

```csharp
// Ø·Ù„Ø¨ Ø§Ù„Ø¯ÙØ¹
PaymentOrder {
    MerchantOrderId,      // Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
    PaymobOrderId,        // Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ ÙÙŠ Paymob
    UserId,
    AmountCents,          // Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ù‚Ø±ÙˆØ´
    Status                // Pending, Paid, Failed
}

// Ù…Ø¹Ø§Ù…Ù„Ø© Ø§Ù„Ø¯ÙØ¹
PaymentTransaction {
    PaymobTransactionId,
    IntegrationType,      // Card, Wallet
    Status,               // Initiated, Paid, Failed
    IsSuccess,
    CapturedAmountCents
}

// Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
UserSavedCard {
    Token,                // Ù…Ù† Paymob
    Last4,                // Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù…
    Brand,                // Visa, Mastercard
    IsDefault
}
```

---

# 10. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©

## 10.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø©

```csharp
// ÙÙŠ AppUser
public double Wallet { get; set; } = 0;

// Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
WalletTransaction {
    UserId,
    Amount,               // Ø§Ù„Ù…Ø¨Ù„Øº
    TransactionType,      // "Add" Ø£Ùˆ "Deduct"
    Notes,                // Ù…Ù„Ø§Ø­Ø¸Ø§Øª
    PreviousBalance,      // Ø§Ù„Ø±ØµÙŠØ¯ Ù‚Ø¨Ù„
    NewBalance,           // Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯
    CreatedAt
}
```

---

## 10.2 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Wallet Scenarios                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  [Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯ - ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†]                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚  Ø¨Ø¹Ø¯ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø´Ø­Ù†:                                           â”‚
â”‚  â€¢ Wallet += BaseAmount (150 EGP)                               â”‚
â”‚  â€¢ TransactionType = "Add"                                      â”‚
â”‚  â€¢ Notes = "Payment for Process #456"                           â”‚
â”‚                                                                 â”‚
â”‚  [Ø®ØµÙ… Ø±ØµÙŠØ¯ - ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©]                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  Ù„Ùˆ Ø¯ÙØ¹ Ù…Ù† Ø§Ù„Ù…Ø­ÙØ¸Ø©:                                             â”‚
â”‚  â€¢ Wallet -= TotalAmount (165 EGP)                              â”‚
â”‚  â€¢ TransactionType = "Deduct"                                   â”‚
â”‚  â€¢ Notes = "Payment for Process #456"                           â”‚
â”‚                                                                 â”‚
â”‚  [Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø±ØµÙŠØ¯]                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  Ù„Ùˆ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§ØªÙ„ØºØª Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹:                                    â”‚
â”‚  â€¢ ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©: Wallet += TotalAmount (refund)                 â”‚
â”‚  â€¢ ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†: Ù„Ø§ ÙŠØ³ØªÙ„Ù… Ø´ÙŠØ¡                                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# 11. Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª

## 11.1 ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Rating System                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Ø¨Ø¹Ø¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŒ ÙƒÙ„Ø§ Ø§Ù„Ø·Ø±ÙÙŠÙ† ÙŠÙ‚ÙŠÙ‘Ù…:                          â”‚
â”‚                                                                 â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© â”€â”€â–º ÙŠÙ‚ÙŠÙ‘Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† (1-5 Ù†Ø¬ÙˆÙ…)                  â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† â”€â”€â–º ÙŠÙ‚ÙŠÙ‘Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© (1-5 Ù†Ø¬ÙˆÙ…)                  â”‚
â”‚                                                                 â”‚
â”‚  Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠÙØ­Ø³Ø¨ ÙƒÙ…ØªÙˆØ³Ø·:                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ newRating = ((oldRating Ã— ratingCount) + stars)          â”‚   â”‚
â”‚  â”‚              / (ratingCount + 1)                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚ user.Rating = newRating                                  â”‚   â”‚
â”‚  â”‚ user.RatingCount++                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Ù…Ø«Ø§Ù„:                                                          â”‚
â”‚  â€¢ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ: 4.5 (Ù…Ù† 10 ØªÙ‚ÙŠÙŠÙ…Ø§Øª)                          â”‚
â”‚  â€¢ ØªÙ‚ÙŠÙŠÙ… Ø¬Ø¯ÙŠØ¯: 3 Ù†Ø¬ÙˆÙ…                                           â”‚
â”‚  â€¢ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯: (4.5Ã—10 + 3) / 11 = 4.36                     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11.2 RatingsHistory

```csharp
RatingsHistory {
    ProcessId,        // Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    RaterUserId,      // Ù…Ù† Ù‚ÙŠÙ‘Ù…
    RateeUserId,      // Ù…Ù† ØªÙ… ØªÙ‚ÙŠÙŠÙ…Ù‡
    Stars,            // 1-5
    CreatedAt
}
```

---

# 12. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ÙˆØ§Ù„Ø´ÙƒØ§ÙˆÙ‰

## 12.1 Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª

### 1. Ø¨Ù„Ø§Øº Ø¶Ø¯ Ù…Ø³ØªØ®Ø¯Ù… (UserReport)
```csharp
UserReport {
    ProcessId,        // Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©
    UserId,           // Ù…Ù† Ø£Ø±Ø³Ù„ Ø§Ù„Ø¨Ù„Ø§Øº
    ReportContent,    // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¨Ù„Ø§Øº
    IsResolved,       // ØªÙ… Ø§Ù„Ø­Ù„ØŸ
    ReportDate
}
```

**Ù…Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù„Ø§Øº:**
1. Process.Status â†’ Aborted
2. ChargingRequest.Status â†’ "Aborted"
3. Ø¥Ø²Ø§Ù„Ø© Ù…Ù† CurrentActivities Ù„Ù„Ø·Ø±ÙÙŠÙ†
4. IsAvailable = true Ù„Ù„Ø·Ø±ÙÙŠÙ†
5. Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø£Ø¯Ù…Ù†
6. Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø±

---

### 2. Ø´ÙƒÙˆÙ‰ Ø¹Ø§Ù…Ø© (UserGeneralComplaint)
```csharp
UserGeneralComplaint {
    UserId,
    CategoryId,       // ÙØ¦Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰
    Content,          // Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    IsResolved,
    CreatedAt
}

ComplaintCategory {
    Name,             // "Ù…Ø´ÙƒÙ„Ø© ØªÙ‚Ù†ÙŠØ©", "Ø§Ù‚ØªØ±Ø§Ø­", Ø¥Ù„Ø®
    Description
}
```

**Ù‚ÙŠÙˆØ¯:**
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆÙ‰ ÙˆØ§Ø­Ø¯Ø© ÙƒÙ„ 12 Ø³Ø§Ø¹Ø©

---

# 13. Ø§Ù„Ù…ØªØ¬Ø± (Store)

## 13.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…ØªØ¬Ø±

```
Store
â”œâ”€â”€ Categories (ÙØ¦Ø§Øª)
â”‚   â”œâ”€â”€ Ø§Ù„Ø´ÙˆØ§Ø­Ù†
â”‚   â”œâ”€â”€ Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª
â”‚   â””â”€â”€ Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª
â”‚
â””â”€â”€ Products (Ù…Ù†ØªØ¬Ø§Øª)
    â”œâ”€â”€ Name, Description
    â”œâ”€â”€ Price, Currency
    â”œâ”€â”€ Status (active/out_of_stock/hidden)
    â””â”€â”€ IsReservable
```

---

## 13.2 Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª (Reservations)

```csharp
StoreReservation {
    UserId,
    ProductId,
    Quantity,

    // Ø§Ù„ØªØ³Ø¹ÙŠØ±
    UnitPrice,
    TotalPrice,

    // Ø§Ù„Ø­Ø§Ù„Ø©
    Status,           // pending/contacted/completed/cancelled
    PaymentStatus,    // unpaid/paid
    DeliveryStatus,   // pending/delivered

    // Ø§Ù„ØªØªØ¨Ø¹
    AdminNotes,
    ContactedAt,
    DeliveredAt
}
```

---

# 14. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

## 14.1 ChargingMode

```csharp
AppSettings {
    ChargingModeEnabled,     // true/false
    ChargingModeEnabledAt,   // Ù…ØªÙ‰ Ø§ØªÙØ¹Ù‘Ù„
    UpdatedBy,               // Ù…ÙŠÙ† Ø¹Ø¯Ù‘Ù„Ù‡
    UpdatedAt
}
```

| ChargingMode | Ø³Ù„ÙˆÙƒ Ø§Ù„Ø´ÙˆØ§Ø­Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© | ØªÙØ¹ÙŠÙ„ ÙŠØ¯ÙˆÙŠ |
|--------------|---------------------|------------|
| `false` | ØªÙÙ†Ø´Ø£ Inactive | Ù…Ù…Ù†ÙˆØ¹ |
| `true` | ØªÙÙ†Ø´Ø£ Active | Ù…Ø³Ù…ÙˆØ­ |

---

## 14.2 FeesConfig

```csharp
FeesConfig {
    MinimumFee,      // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ù…ÙˆÙ„Ø© (Ù…Ø«Ù„Ø§Ù‹ 10 EGP)
    Percentage,      // Ø§Ù„Ù†Ø³Ø¨Ø© (Ù…Ø«Ù„Ø§Ù‹ 10%)
    UpdatedAt,
    UpdatedBy
}
```

**Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©:**
```
VoltyksFees = max(MinimumFee, BaseAmount Ã— Percentage)
```

---

## 14.3 MobileAppConfig

```csharp
MobileAppConfig {
    AndroidEnabled,      // kill-switch Ù„Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
    IosEnabled,          // kill-switch Ù„Ù„Ù€ iOS
    AndroidMinVersion,   // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯
    IosMinVersion        // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù€ iOS
}
```

---

## 14.4 TermsDocument

```csharp
TermsDocument {
    VersionNumber,       // Ø±Ù‚Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø±
    Lang,                // "ar" Ø£Ùˆ "en"
    IsActive,
    PublishedAt,
    PayloadJson          // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±ÙˆØ· (JSON)
}
```

---

# 15. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Endpoints

## 15.1 Auth Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| POST | `/api/auth/register` | ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ |
| POST | `/api/auth/Login` | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| POST | `/api/auth/Logout` | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| POST | `/api/auth/CheckPhoneNumberExists` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ |
| POST | `/api/auth/CheckEmailExists` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ |
| POST | `/api/auth/forget-password` | Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± |
| POST | `/api/auth/verify-forget-password-otp` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† OTP |
| POST | `/api/auth/reset-password` | Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± |
| GET | `/api/auth/GetProfileDetails` | Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| PUT | `/api/auth/toggle-availability` | ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ØªÙˆÙØ± |
| GET | `/api/auth/wallet` | Ø±ØµÙŠØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø© |

---

## 15.2 Vehicle Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| POST | `/api/vehicles/CreateVehicle` | Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø© |
| PUT | `/api/vehicles/UpdateVehicle` | ØªØ¹Ø¯ÙŠÙ„ Ø³ÙŠØ§Ø±Ø© |
| GET | `/api/vehicles/GetVehiclesByUser` | Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| DELETE | `/api/vehicles/DeleteVehicle` | Ø­Ø°Ù Ø³ÙŠØ§Ø±Ø© |

---

## 15.3 Charger Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| GET | `/api/charger/GetCapacity` | Ø§Ù„Ø³Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© |
| GET | `/api/charger/GetProtocol` | Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© |
| GET | `/api/charger/GetPrices` | Ø§Ù„Ø£Ø³Ø¹Ø§Ø± |
| POST | `/api/charger/AddCharger` | Ø¥Ø¶Ø§ÙØ© Ø´Ø§Ø­Ù† |
| GET | `/api/charger/GetChargersByUser` | Ø´ÙˆØ§Ø­Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| PUT | `/api/charger/ToggleStatus` | ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø´Ø§Ø­Ù† |
| PUT | `/api/charger/UpdateCharger` | ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø§Ø­Ù† |
| DELETE | `/api/charger/DeleteCharger` | Ø­Ø°Ù Ø§Ù„Ø´Ø§Ø­Ù† |
| POST | `/api/charger/GetNearChargers` | Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´ÙˆØ§Ø­Ù† Ù‚Ø±ÙŠØ¨Ø© |
| POST | `/api/charger/GetChargerDetailsById` | ØªÙØ§ØµÙŠÙ„ Ø´Ø§Ø­Ù† |

---

## 15.4 ChargingRequest Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| POST | `/api/chargingRequest/registerDeviceToken` | ØªØ³Ø¬ÙŠÙ„ Device Token |
| POST | `/api/chargingRequest/sendChargingRequest` | Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù† |
| PUT | `/api/chargingRequest/AcceptRequest` | Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ |
| PUT | `/api/chargingRequest/RejectRequest` | Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨ |
| PUT | `/api/chargingRequest/ConfirmRequest` | ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ |
| PUT | `/api/chargingRequest/abortRequest` | Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ |
| POST | `/api/chargingRequest/GetRequestDetailsById` | ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ |
| POST | `/api/chargingRequest/voltyksFeesForRequest` | Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© |
| POST | `/api/chargingRequest/transfer-fees` | ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© |

---

## 15.5 Processes Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| POST | `/api/processes/confirm-by-vehicle-owner` | ØªØ£ÙƒÙŠØ¯ Ù…Ù† ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© |
| POST | `/api/processes/update-Process` | ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù…Ù„ÙŠØ© |
| POST | `/api/processes/owner-decision` | Ù‚Ø±Ø§Ø± ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† (Ø¨Ø¯Ø¡/Ø¥Ù†Ù‡Ø§Ø¡/Ø¥Ù„ØºØ§Ø¡) |
| POST | `/api/processes/submit-rating` | Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ… |
| GET | `/api/processes/my-activities` | Ø¹Ù…Ù„ÙŠØ§ØªÙŠ |
| GET | `/api/processes/pending` | Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù†Ø´Ø·Ø© |

---

## 15.6 Store Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| GET | `/api/store/categories` | Ø§Ù„ÙØ¦Ø§Øª |
| GET | `/api/store/products` | Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª |
| GET | `/api/store/GetProductById` | ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬ |
| POST | `/api/store/reservations` | Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø² |
| GET | `/api/store/reservations` | Ø­Ø¬ÙˆØ²Ø§ØªÙŠ |
| DELETE | `/api/store/reservations/{id}` | Ø¥Ù„ØºØ§Ø¡ Ø­Ø¬Ø² |

---

## 15.7 App Config Endpoints

| Method | Endpoint | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|--------|----------|---------|
| GET | `/api/v1/app-config/mobile-status` | Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ |
| GET | `/api/v1/app-config/charging-mode-status` | Ø­Ø§Ù„Ø© ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø­Ù† |
| GET | `/api/terms` | Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù… |

---

# 16. Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©

## 16.1 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø¹Ù…Ù„ÙŠØ© Ø´Ø­Ù† Ù†Ø§Ø¬Ø­Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 1: Ø¹Ù…Ù„ÙŠØ© Ø´Ø­Ù† Ù†Ø§Ø¬Ø­Ø© ÙƒØ§Ù…Ù„Ø©                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ø§Ù„ÙˆÙ‚Øª    ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©              ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                 â”‚
â”‚  â•â•â•â•â•    â•â•â•â•â•â•â•â•â•â•â•              â•â•â•â•â•â•â•â•â•â•â•â•                 â”‚
â”‚                                                                  â”‚
â”‚  10:00    ÙŠØ¨Ø­Ø« Ø¹Ù† Ø´Ø§Ø­Ù† Ù‚Ø±ÙŠØ¨                                      â”‚
â”‚           GetNearChargers                                        â”‚
â”‚                                                                  â”‚
â”‚  10:01    ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø±                  â”‚
â”‚           sendChargingRequest       "Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯"               â”‚
â”‚           Status: pending           ğŸ“±                          â”‚
â”‚                                                                  â”‚
â”‚  10:02                              ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ø·Ù„Ø¨                   â”‚
â”‚           ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø± â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AcceptRequest                â”‚
â”‚           "ØªÙ… Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨Ùƒ"            Status: accepted             â”‚
â”‚           Timer: 10 Ø¯Ù‚Ø§Ø¦Ù‚                                        â”‚
â”‚                                                                  â”‚
â”‚  10:05    ÙŠØ¤ÙƒØ¯ ÙˆÙŠØªØ­Ø±Ùƒ                                            â”‚
â”‚           confirm-by-vehicle-owner                               â”‚
â”‚           Status: confirmed                                      â”‚
â”‚           Timer: 15 Ø¯Ù‚ÙŠÙ‚Ø©                                        â”‚
â”‚           CurrentActivities += [1]  CurrentActivities += [1]     â”‚
â”‚           IsAvailable = false       IsAvailable = false          â”‚
â”‚                                                                  â”‚
â”‚  10:15    ÙŠØµÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø´Ø­Ù†                     â”‚
â”‚                                     owner-decision: started      â”‚
â”‚                                     Status: Started              â”‚
â”‚                                                                  â”‚
â”‚  10:15-   [Ø§Ù„Ø´Ø­Ù† Ø¬Ø§Ø±ÙŠ - ØªØ­Ø¯ÙŠØ«Ø§Øª SignalR]                        â”‚
â”‚  11:00    ÙŠØ´ÙˆÙ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª            update-Process               â”‚
â”‚           amountCharged: 30kW                                    â”‚
â”‚                                                                  â”‚
â”‚  11:00                              ÙŠÙ†Ù‡ÙŠ Ø§Ù„Ø´Ø­Ù†                   â”‚
â”‚           ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø± â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ owner-decision: ended         â”‚
â”‚           "ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´Ø­Ù†"          Status: PendingCompleted     â”‚
â”‚                                                                  â”‚
â”‚  11:01    ÙŠØ¯ÙØ¹ 165 EGP                                          â”‚
â”‚           (Paymob/Wallet)                                       â”‚
â”‚                                     ÙŠØ³ØªÙ„Ù… 150 EGP ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø©     â”‚
â”‚                                                                  â”‚
â”‚  11:02    ÙŠÙ‚ÙŠÙ‘Ù… â­â­â­â­â­ â”€â”€â”€â”€â”€â”€â”€â”€â–º ÙŠÙ‚ÙŠÙ‘Ù… â­â­â­â­                  â”‚
â”‚           submit-rating: 5          submit-rating: 4             â”‚
â”‚                                                                  â”‚
â”‚  11:02    Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø© â•â•â•â•â•â•â•â•  Process.Status: Completed     â”‚
â”‚           CurrentActivities = []    CurrentActivities = []       â”‚
â”‚           IsAvailable = true        IsAvailable = true           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.2 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø·Ù„Ø¨ Ù…Ø±ÙÙˆØ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 2: Ø·Ù„Ø¨ Ù…Ø±ÙÙˆØ¶                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©                      ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                   â”‚
â”‚                                                                  â”‚
â”‚  ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø±                  â”‚
â”‚  Status: pending                                                 â”‚
â”‚                                                                  â”‚
â”‚                                     ÙŠØ±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨                   â”‚
â”‚  ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø± â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  RejectRequest                â”‚
â”‚  "ØªÙ… Ø±ÙØ¶ Ø·Ù„Ø¨Ùƒ"                      reason: "Ù…Ø´ØºÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹"       â”‚
â”‚  Status: rejected                                                â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  Ø§Ù†ØªÙ‡Ù‰ - Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ© - Ù„Ø§ ØªØºÙŠÙŠØ± ÙÙŠ CurrentActivities          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.3 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø·Ù„Ø¨ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 3: Ø·Ù„Ø¨ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Expired)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©                      ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                   â”‚
â”‚                                                                  â”‚
â”‚  ÙŠØ±Ø³Ù„ Ø·Ù„Ø¨ Ø´Ø­Ù† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø±                  â”‚
â”‚  Status: pending                                                 â”‚
â”‚                                                                  â”‚
â”‚  [10 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø¯ÙˆÙ† Ø±Ø¯...]                                          â”‚
â”‚                                                                  â”‚
â”‚  ÙŠØ³ØªÙ‚Ø¨Ù„ Ø¥Ø´Ø¹Ø§Ø±                                                    â”‚
â”‚  "Ø§Ù†ØªÙ‡Øª ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø·Ù„Ø¨"                                           â”‚
â”‚  Status: expired                                                 â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  Ø§Ù†ØªÙ‡Ù‰ - ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.4 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Abort)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 4: Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Abort)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒÙŠØ¯ØŒ Ø£ÙŠ Ø·Ø±Ù ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ù„Ø¥Ù„ØºØ§Ø¡:                              â”‚
â”‚                                                                  â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©                      ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                   â”‚
â”‚                                                                  â”‚
â”‚  [Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø§Ø±ÙŠØ©]                                                 â”‚
â”‚  Status: confirmed/Started                                       â”‚
â”‚                                                                  â”‚
â”‚  ÙŠÙ„ØºÙŠ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º     â”‚
â”‚  abortRequest                                                    â”‚
â”‚  Ø£Ùˆ                                                              â”‚
â”‚  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ÙŠÙ„ØºÙŠ     â”‚
â”‚                                      owner-decision: aborted     â”‚
â”‚                                                                  â”‚
â”‚  Process.Status = Aborted                                        â”‚
â”‚  ChargingRequest.Status = "Aborted"                              â”‚
â”‚                                                                  â”‚
â”‚  CurrentActivities = []             CurrentActivities = []       â”‚
â”‚  IsAvailable = true                 IsAvailable = true           â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  Ø§Ù†ØªÙ‡Ù‰ - Ù„Ùˆ ÙƒØ§Ù† ÙÙŠ Ø¯ÙØ¹ØŒ ÙŠØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¯Ø§Ø¯                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.5 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø¨Ù„Ø§Øº (Report)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 5: Ø¨Ù„Ø§Øº (Report)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø©                      ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù†                   â”‚
â”‚                                                                  â”‚
â”‚  [Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¬Ø§Ø±ÙŠØ©]                                                 â”‚
â”‚                                                                  â”‚
â”‚  ÙŠØ±Ø³Ù„ Ø¨Ù„Ø§Øº â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                               â”‚
â”‚  CreateReport                                                    â”‚
â”‚  content: "ØµØ§Ø­Ø¨ Ø§Ù„Ø´Ø§Ø­Ù† Ù„Ù… ÙŠØ­Ø¶Ø±"                                  â”‚
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙ‚ÙˆÙ… Ø¨Ù€:                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚  1. Ø¥Ù†Ø´Ø§Ø¡ UserReport                                            â”‚
â”‚  2. Process.Status = Aborted                                     â”‚
â”‚  3. ChargingRequest.Status = "Aborted"                          â”‚
â”‚  4. CurrentActivities = [] Ù„Ù„Ø·Ø±ÙÙŠÙ†                              â”‚
â”‚  5. IsAvailable = true Ù„Ù„Ø·Ø±ÙÙŠÙ†                                  â”‚
â”‚  6. Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø·Ø±Ù Ø§Ù„Ø¢Ø®Ø±                                           â”‚
â”‚  7. Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø£Ø¯Ù…Ù†                                                 â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù…Ù†ØªÙ‡ÙŠØ© - Ø§Ù„Ø£Ø¯Ù…Ù† ÙŠØ±Ø§Ø¬Ø¹ Ø§Ù„Ø¨Ù„Ø§Øº                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.6 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¸ÙˆØ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 6: Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¸ÙˆØ± (Banned)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…                          Ø§Ù„Ø£Ø¯Ù…Ù†                        â”‚
â”‚                                                                  â”‚
â”‚  ÙŠØ­Ø§ÙˆÙ„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„                                              â”‚
â”‚  POST /api/auth/Login                                            â”‚
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØªØ­Ù‚Ù‚:                                                   â”‚
â”‚  if (user.IsBanned)                                              â”‚
â”‚      return Error("Your account has been suspended")             â”‚
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹:                                             â”‚
â”‚  âœ— ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„                                                  â”‚
â”‚  âœ— Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ø§Øª Ø´Ø­Ù†                                               â”‚
â”‚  âœ— Ù‚Ø¨ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª                                                    â”‚
â”‚  âœ— Ø£ÙŠ Ø´ÙŠØ¡                                                        â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¯Ù…Ù† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±                                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.7 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: ChargingMode Ù…Ø¹Ø·Ù‘Ù„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 7: ChargingMode = false                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ÙŠÙ Ø´Ø§Ø­Ù† Ø¬Ø¯ÙŠØ¯                                         â”‚
â”‚  POST /api/charger/AddCharger                                    â”‚
â”‚       â†“                                                          â”‚
â”‚  Ø§Ù„Ø´Ø§Ø­Ù† ÙŠÙÙ†Ø´Ø£ Ø¨Ù€ IsActive = false                                â”‚
â”‚       â†“                                                          â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ­Ø§ÙˆÙ„ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø´Ø§Ø­Ù†                                     â”‚
â”‚  PUT /api/charger/ToggleStatus                                   â”‚
â”‚       â†“                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Error: "Cannot activate charger. Charging mode is not      â”‚ â”‚
â”‚  â”‚ enabled yet. Please wait for admin activation."            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â†“                                                          â”‚
â”‚  Ø§Ù„Ø´Ø§Ø­Ù† Ù„Ø§ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¨Ø­Ø«                                         â”‚
â”‚  ØµØ§Ø­Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù„Ø§ ÙŠØ¬Ø¯ Ø§Ù„Ø´Ø§Ø­Ù†                                      â”‚
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  Ø­ØªÙ‰ Ø§Ù„Ø£Ø¯Ù…Ù† ÙŠÙØ¹Ù‘Ù„ ChargingMode Ø£Ùˆ ÙŠÙØ¹Ù‘Ù„ Ø§Ù„Ø´Ø§Ø­Ù† ÙŠØ¯ÙˆÙŠØ§Ù‹            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16.8 Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 8: Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ­ØªØ§Ø¬ ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø¨Ø§Ø±ÙŠ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚                                           â”‚
â”‚  Ø¥ØµØ¯Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: 1.0.0                                            â”‚
â”‚       â†“                                                          â”‚
â”‚  GET /api/v1/app-config/mobile-status?platform=android&version=1.0.0
â”‚       â†“                                                          â”‚
â”‚  Response:                                                       â”‚
â”‚  {                                                               â”‚
â”‚    "isEnabled": true,                                            â”‚
â”‚    "requiresUpdate": true,                                       â”‚
â”‚    "minVersion": "2.0.0",                                        â”‚
â”‚    "message": "ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±"                     â”‚
â”‚  }                                                               â”‚
â”‚       â†“                                                          â”‚
â”‚  Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙŠØ¹Ø±Ø¶ Ø´Ø§Ø´Ø© "ØªØ­Ø¯ÙŠØ« Ø¥Ø¬Ø¨Ø§Ø±ÙŠ"                                â”‚
â”‚  Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø§Ø²Ù… ÙŠØ­Ø¯Ù‘Ø« Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Ø§Ù„Ø®Ù„Ø§ØµØ©

## Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

1. **Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†**: ØµØ§Ø­Ø¨ Ø³ÙŠØ§Ø±Ø© / ØµØ§Ø­Ø¨ Ø´Ø§Ø­Ù† / Ø£Ø¯Ù…Ù†
2. **Ø§Ù„ÙƒÙŠØ§Ù†Ø§Øª**: AppUser, Vehicle, Charger, ChargingRequest, Process
3. **Ø§Ù„Ø­Ø§Ù„Ø§Øª**: pending â†’ accepted â†’ confirmed â†’ Started â†’ PendingCompleted â†’ Completed
4. **Ø§Ù„Ø¯ÙØ¹**: Paymob (Card/Wallet/Saved Cards)
5. **Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**: Firebase FCM + SignalR
6. **Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª**: ChargingMode, FeesConfig, MobileAppConfig

## Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:

- âœ“ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¹Ù…Ù„ÙŠØ© Ù†Ø´Ø·Ø© = Ù…Ø®ØªÙÙŠ Ù…Ù† Ø§Ù„Ø¨Ø­Ø«
- âœ“ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ØªÙ†ØªÙ‡ÙŠ Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ù† Ø§Ù„Ø·Ø±ÙÙŠÙ† Ø£Ùˆ Ø¨Ø§Ù„Ø¨Ù„Ø§Øº
- âœ“ ChargingMode ÙŠØªØ­ÙƒÙ… ÙÙŠ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø´ÙˆØ§Ø­Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
- âœ“ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© = max(Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰, Ø§Ù„Ù†Ø³Ø¨Ø© Ã— Ø§Ù„Ù…Ø¨Ù„Øº)
- âœ“ Smart Validation ÙŠÙ…Ù†Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ù…Ù† Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

---

**Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:** 2026-02-01
